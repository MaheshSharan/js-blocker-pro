<!DOCTYPE html>
<html>
<head>
  <title>JS Blocker Pro</title>
  <link rel="stylesheet" type="text/css" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h2>JS Blocker Pro</h2>
      <button id="scanBtn" class="scan-btn">Scan Scripts</button>
    </div>
    
    <div id="mainView">
      <div class="toggle-container">
        <label class="switch">
          <input type="checkbox" id="jsToggle">
          <span class="slider"></span>
        </label>
        <span id="status">JavaScript Enabled</span>
      </div>
      
      <div class="toggle-container">
        <label class="switch">
          <input type="checkbox" id="permissionToggle">
          <span class="slider"></span>
        </label>
        <span id="permissionStatus">Permission Prompts Enabled</span>
      </div>
      
      <h3>Blocked Scripts</h3>
      <textarea id="blockedScripts" placeholder="Enter URLs of scripts to block, one per line"></textarea>
      <button id="saveBlockedScripts">Save Blocked Scripts</button>
      <div id="saveMessage" class="message"></div>
    </div>

    <div id="scanView" class="hidden">
      <div class="scan-header">
        <button id="backBtn" class="text-btn">← Back to Main</button>
        <span class="scan-title">Script Intelligence</span>
      </div>
      
      <div class="scan-controls">
        <div class="mode-selector">
          <label for="controlMode">Mode:</label>
          <select id="controlMode">
            <option value="normal">Normal</option>
            <option value="banking">Banking (Strict)</option>
            <option value="social">Social (Balanced)</option>
            <option value="privacy">Privacy (3rd Party Block)</option>
            <option value="developer">Developer (Relaxed)</option>
          </select>
        </div>
        <button id="selectAllBtn" class="control-btn">Select All</button>
        <button id="disableSelectedBtn" class="control-btn">Block Selected</button>
        <button id="allowSelectedBtn" class="control-btn">Allow Selected</button>
        <button id="delaySelectedBtn" class="control-btn">Delay Selected</button>
      </div>

      <div id="delayPanel" class="delay-panel hidden">
        <div class="delay-header">
          <span>Execution Timing Control</span>
          <button id="closeDelayPanel" class="close-btn">✕</button>
        </div>
        <div class="delay-options">
          <label class="delay-option">
            <input type="radio" name="delayType" value="interaction" checked>
            <span>After User Interaction (click/scroll)</span>
          </label>
          <label class="delay-option">
            <input type="radio" name="delayType" value="scroll">
            <span>After Scroll</span>
          </label>
          <label class="delay-option">
            <input type="radio" name="delayType" value="time">
            <span>After Time Delay</span>
          </label>
          <div class="time-input-group">
            <input type="number" id="delaySeconds" min="1" max="60" value="5" placeholder="Seconds">
            <span>seconds</span>
          </div>
        </div>
        <button id="applyDelayBtn" class="control-btn">Apply Delay</button>
      </div>

      <div id="scanStatus" class="scan-status">Scanning...</div>
      
      <div class="ai-summary" id="aiSummary"></div>
      
      <div id="scriptTable" class="script-table">
        <table>
          <thead>
            <tr>
              <th><input type="checkbox" id="selectAllCheckbox"></th>
              <th>Script</th>
              <th>Source</th>
              <th>Type</th>
              <th>Category</th>
              <th>Trust</th>
              <th>Behavior</th>
              <th>Deps</th>
              <th>Exec</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="scriptTableBody">
          </tbody>
        </table>
      </div>

      <div class="policy-builder" id="policyBuilder">
        <div class="policy-header">
          <span>Policy Builder</span>
          <button id="togglePolicyBuilder" class="control-btn">Create Rule</button>
        </div>
        <div id="policyForm" class="policy-form hidden">
          <div class="policy-row">
            <label>Block if:</label>
          </div>
          <div class="policy-conditions">
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="thirdParty">
              <span>Third-party script</span>
            </label>
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="tracking">
              <span>Tracking category</span>
            </label>
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="ads">
              <span>Ads category</span>
            </label>
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="fingerprinting">
              <span>Uses fingerprinting</span>
            </label>
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="lowTrust">
              <span>Trust score below 30</span>
            </label>
            <label class="policy-condition">
              <input type="checkbox" name="condition" value="beforeInteraction">
              <span>Loads before user interaction</span>
            </label>
          </div>
          <button id="applyPolicyBtn" class="control-btn">Apply Policy</button>
        </div>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
